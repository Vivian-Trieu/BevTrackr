<!DOCTYPE html>
<html>

<head>
    <title>Home Page</title>
    <!-- Include Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script>
        // Initialize Firebase
        var firebaseConfig = {
            // Your Firebase configuration
            apiKey: "AIzaSyDj0QJk8Ptz0N_WjHg76iFhY3f2fBmStcM",
            authDomain: "app-to-test-multiple-users.firebaseapp.com",
            databaseURL: "https://app-to-test-multiple-users-default-rtdb.firebaseio.com/",
            projectId: "app-to-test-multiple-users",
            storageBucket: "app-to-test-multiple-users.appspot.com",
            messagingSenderId: "342422003892",
            appId: "1:342422003892:web:7d0070e376d055c29737e1"
        };
        firebase.initializeApp(firebaseConfig);

        // Get a reference to the Firebase database
        var database = firebase.database();

        // Retrieve the list data from Firebase and populate the dropdown
        function populateDropdown() {
            var dropdown = document.getElementById("myDropdown");

            // Retrieve the data from Firebase
            database.ref("listData").once("value", function (snapshot) {
                dropdown.innerHTML = ""; // Clear previous options

                snapshot.forEach(function (childSnapshot) {
                    var listItem = childSnapshot.val();
                    var listItemText = listItem.text;

                    // Create and append a new option element
                    var newOption = document.createElement("option");
                    newOption.value = listItemText;
                    newOption.text = listItemText;
                    dropdown.appendChild(newOption);
                });
            });
        }

        // Update the selected option in Firebase
        function updateSelectedOption() {
            var selectedOption = document.getElementById("myDropdown").value;

            // Save the selected option in Firebase
            database.ref("selectedOption").set(selectedOption);
        }

        // Listen for changes in the selected option and update the dropdown
        function listenForSelectedOption() {
            var dropdown = document.getElementById("myDropdown");

            database.ref("selectedOption").on("value", function (snapshot) {
                var selectedOption = snapshot.val();

                // Update the selected option in the dropdown
                dropdown.value = selectedOption;
            });
        }
    </script>
</head>

<body onload="populateDropdown(); listenForSelectedOption()">
    <h1>Home Page</h1>
    <select id="myDropdown">
        <!-- Dropdown options will be dynamically populated -->
    </select>
    <br><br>
    <button onclick="updateSelectedOption()">PING</button>

    <!-- Include Firebase configuration and initialization -->
    <script src="firebase-config.js"></script>
</body>

</html>